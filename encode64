import cv2
import base64
import numpy as np

def encode_image(img_ndarray):
    # Encode the image as .jpg in memory
    success, encoded_image = cv2.imencode(".jpg", img_ndarray)
    if not success:
        raise ValueError("Image encoding failed")

    # Convert to base64 string
    base64_bytes = base64.b64encode(encoded_image.tobytes())
    base64_string = base64_bytes.decode("utf-8")
    return base64_string

# Read image
image_path = "your_image.jpg"  # Replace with actual path
img = cv2.imread(image_path)

# Encode image to base64
encoded_base64 = encode_image(img)

print("Base64 encoded string (preview):")
print(encoded_base64[:100], "...")
